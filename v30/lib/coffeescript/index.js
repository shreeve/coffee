// Generated by CoffeeScript 2.8.0

import * as CoffeeScript from './coffeescript';

import fs from 'fs';

import vm from 'vm';

export var compile = CoffeeScript.compile;

export var run = function(code, options = {}) {
  var compiled;
  compiled = CoffeeScript.compile(code, {
    bare: true,
    ...options
  });
  return vm.runInThisContext(compiled.js ?? compiled);
};

export var evalCode = function(code, options = {}) {
  var compiled, sandbox;
  if (!(code = code.trim())) {
    return;
  }
  sandbox = options.sandbox ?? global;
  compiled = CoffeeScript.compile(code, {
    bare: true,
    ...options
  });
  if (sandbox === global) {
    return vm.runInThisContext(compiled);
  } else {
    return vm.runInContext(compiled, vm.createContext(sandbox));
  }
};

export var compileFile = function(filename, options = {}) {
  var source;
  source = fs.readFileSync(filename, 'utf8');
  return CoffeeScript.compile(source, {filename, ...options});
};

export var runFile = function(filename, options = {}) {
  var compiled;
  compiled = compileFile(filename, options);
  return vm.runInThisContext(compiled.js ?? compiled);
};

export * from './coffeescript';

export {
  default
} from './coffeescript';
